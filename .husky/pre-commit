
echo "ğŸš€ Running pre-commit checks...\n"


STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep -E '\.(js|jsx|ts|tsx|json|md)$')

# Run Prettier check
if [ -n "$STAGED_FILES" ]; then
    echo "ğŸ¨ Checking code formatting with Prettier..."
    if ! echo "$STAGED_FILES" | xargs yarn prettier --check; then
        echo "\nâŒ Prettier check failed!"
        echo "ğŸ’¡ Tip: Run 'yarn prettier:write' to auto-fix formatting issues\n"
        exit 1
    fi
fi
echo "âœ… Prettier check passed!\n"

# Run ESLint
echo "ğŸ” Linting code with ESLint..."
if ! yarn lint-staged; then
    echo "\nâŒ ESLint check failed!"
    echo "ğŸ’¡ Tip: Run 'yarn lint --fix' to auto-fix some issues\n"
    exit 1
fi
echo "âœ… ESLint check passed!\n"

echo "ğŸ‰ All pre-commit checks passed! Ready to commit.\n"